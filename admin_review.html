{% extends "base.html" %}

{% block title %}Review Response - ReviewHub{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="mb-6">
        <a href="{{ url_for('admin_dashboard') }}" class="text-primary-blue hover:underline flex items-center">
            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
            Back to Dashboard
        </a>
    </div>

    <div class="bg-white rounded-lg shadow-lg p-8 mb-6">
        <h2 class="text-2xl font-bold text-professional-gray mb-6">Customer Review</h2>
        
        <div class="mb-4">
            <p class="text-sm text-professional-gray opacity-75 mb-2">Date</p>
            <p class="text-professional-gray font-semibold">{{ review.date[:10] }}</p>
        </div>
        
        <div class="mb-4">
            <p class="text-sm text-professional-gray opacity-75 mb-2">Rating</p>
            <div class="flex items-center space-x-1">
                {% for i in range(1, 6) %}
                    {% if i <= review.rating %}
                        <svg class="w-6 h-6 text-primary-blue fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/>
                        </svg>
                    {% else %}
                        <svg class="w-6 h-6 text-gray-300 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                            <path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/>
                        </svg>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
        
        <div class="mb-4">
            <p class="text-sm text-professional-gray opacity-75 mb-2">Comment</p>
            <p class="text-professional-gray text-lg leading-relaxed bg-blue-50 rounded-lg p-4">{{ review.comment }}</p>
        </div>
        
        <div>
            <p class="text-sm text-professional-gray opacity-75 mb-2">Status</p>
            <span class="px-3 py-1 rounded-full text-sm font-semibold {% if review.status == 'Resolved' %}bg-green-100 text-green-800{% else %}bg-yellow-100 text-yellow-800{% endif %}">
                {{ review.status }}
            </span>
        </div>
    </div>

    {% if review.response %}
        <div class="bg-white rounded-lg shadow-lg p-8 border-l-4 border-green-500">
            <h3 class="text-xl font-bold text-professional-gray mb-4">Your Response</h3>
            <p class="text-professional-gray leading-relaxed">{{ review.response }}</p>
            {% if review.response_date %}
                <p class="text-sm text-professional-gray opacity-60 mt-4">Submitted on {{ review.response_date[:10] }}</p>
            {% endif %}
        </div>
    {% else %}
        <div class="bg-white rounded-lg shadow-lg p-8">
            <h3 class="text-xl font-bold text-professional-gray mb-4">Submit Response</h3>
            
            <form method="POST" action="{{ url_for('admin_review', review_id=review.id) }}">
                <div class="mb-6">
                    <label for="response" class="block text-professional-gray font-semibold mb-3">Your Response</label>
                    <textarea 
                        name="response" 
                        id="response" 
                        rows="6" 
                        class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-primary-blue focus:outline-none text-professional-gray"
                        placeholder="Thank you for your feedback..."
                        required
                    ></textarea>
                </div>
                
                <div class="flex space-x-4">
                    <button type="submit" class="px-8 py-3 bg-primary-blue text-white font-semibold rounded-lg hover:bg-blue-600 transition">
                        Submit Response & Mark as Resolved
                    </button>
                    <a href="{{ url_for('admin_dashboard') }}" class="px-8 py-3 bg-gray-300 text-professional-gray font-semibold rounded-lg hover:bg-gray-400 transition">
                        Cancel
                    </a>
                </div>
            </form>
        </div>
    {% endif %}
</div>
{% endblock %}
